!function(e,o){var t;t={options:{defaultColor:!1,change:!1,clear:!1,hide:!0,palettes:!0,width:255,mode:"hsv",type:"full",slider:"horizontal"},_createHueOnly:function(){var o,t=this,i=t.element;i.hide(),o="hsl("+i.val()+", 100, 50)",i.iris({mode:"hsl",type:"hue",hide:!1,color:o,change:function(o,i){e.isFunction(t.options.change)&&t.options.change.call(this,o,i)},width:t.options.width,slider:t.options.slider})},_create:function(){if(e.support.iris){var o=this,t=o.element;if(e.extend(o.options,t.data()),"hue"===o.options.type)return o._createHueOnly();o.close=e.proxy(o.close,o),o.initialValue=t.val(),t.addClass("wp-color-picker").hide().wrap('<div class="wp-picker-container" />'),o.wrap=t.parent(),o.toggler=e('<a tabindex="0" class="wp-color-result" />').insertBefore(t).css({backgroundColor:o.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",wpColorPickerL10n.current),o.pickerContainer=e('<div class="wp-picker-holder" />').insertAfter(t),o.button=e('<input type="button" class="button button-small hidden" />'),o.options.defaultColor?o.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString):o.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear),t.wrap('<span class="wp-picker-input-wrap" />').after(o.button),t.iris({target:o.pickerContainer,hide:o.options.hide,width:o.options.width,mode:o.options.mode,palettes:o.options.palettes,change:function(t,i){o.toggler.css({backgroundColor:i.color.toString()}),e.isFunction(o.options.change)&&o.options.change.call(this,t,i)}}),t.val(o.initialValue),o._addListeners(),o.options.hide||o.toggler.click()}},_addListeners:function(){var o=this;o.wrap.on("click.wpcolorpicker",function(e){e.stopPropagation()}),o.toggler.click(function(){o.toggler.hasClass("wp-picker-open")?o.close():o.open()}),o.element.change(function(t){var i=e(this).val();""!==i&&"#"!==i||(o.toggler.css("backgroundColor",""),e.isFunction(o.options.clear)&&o.options.clear.call(this,t))}),o.toggler.on("keyup",function(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),o.toggler.trigger("click").next().focus())}),o.button.click(function(t){var i=e(this);i.hasClass("wp-picker-clear")?(o.element.val(""),o.toggler.css("backgroundColor",""),e.isFunction(o.options.clear)&&o.options.clear.call(this,t)):i.hasClass("wp-picker-default")&&o.element.val(o.options.defaultColor).change()})},open:function(){this.element.show().iris("toggle").focus(),this.button.removeClass("hidden"),this.wrap.addClass("wp-picker-active"),this.toggler.addClass("wp-picker-open"),e("body").trigger("click.wpcolorpicker").on("click.wpcolorpicker",this.close)},close:function(){this.element.hide().iris("toggle"),this.button.addClass("hidden"),this.wrap.removeClass("wp-picker-active"),this.toggler.removeClass("wp-picker-open"),e("body").off("click.wpcolorpicker",this.close)},color:function(e){if(e===o)return this.element.iris("option","color");this.element.iris("option","color",e)},defaultColor:function(e){if(e===o)return this.options.defaultColor;this.options.defaultColor=e}},e.widget("wp.upbColorPicker",t)}(jQuery);